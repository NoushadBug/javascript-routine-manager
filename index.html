<!DOCTYPE html>
<html lang="en">

<head>
	<meta content="width=device-width, initial-scale=1.0" name="viewport">
	<link rel="icon" href="	https://image.flaticon.com/icons/png/512/2852/2852620.png" type="image/icon type">
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
		integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
	<link rel="stylesheet" href="https://cdn.datatables.net/1.10.22/css/jquery.dataTables.min.css">
	<title>Class routine</title>
		<!-- <script>
		window.onload = function() {
		  var context = new AudioContext();
		}
		</script> -->
</head>
<style>
	.show {
		opacity: 1;
	}

	.hide {
		display: none;
	}
</style>

<body style="overflow-y: scroll;" id='body' class="bg-default">
	<div class="header navbar navbar-inverse navbar-fixed-top">
		<div class="navbar-inner">
			<div class="container-fluid">
			</div>
		</div>
	</div>

	<!-- <iframe src="https://bigsoundbank.com/UPLOAD/ogg/0396.ogg" allow="autoplay" style="display:none" id="iframeAudio"></iframe>  -->
	<audio autoplay id="audio">
		<source src="https://bigsoundbank.com/UPLOAD/mp3/0396.mp3">
		<source src="https://bigsoundbank.com/UPLOAD/ogg/0396.ogg">
		<source src="https://bigsoundbank.com/UPLOAD/ogg/0396.wav">
	</audio> 
	<!-- <video id="audio" controls="" autoplay>
		<source src="https://bigsoundbank.com/UPLOAD/mp3/0396.mp3" type="audio/mpeg">
		<source src="https://bigsoundbank.com/UPLOAD/ogg/0396.ogg" >
		<source src="https://bigsoundbank.com/UPLOAD/ogg/0396.wav" type='audio/wav'>
	</video>  -->
	<div class="some_div"></div>
<div class="page-container row-fluid sidebar-closed">
		<div class="page-content">

			<div id="portlet-config" class="modal hide">
				<div class="modal-header">
					<button data-dismiss="modal" class="close" type="button"></button>
					<h3>portlet Settings</h3>
				</div>
				<div class="modal-body">
					<p>Here will be a configuration form</p>
				</div>
			</div>
			<div class="container-fluid ">

				<h3 id="page-title"></h3>
				<div class="col-6 py-3 row container btn-group btn-group-sm">
					<button class="btn btn-info mr-1 rounded font-weight-bold" onclick="viewAll(true);">View Full</button>
					<button class="btn pointer btn-secondary mr-1 rounded font-weight-bold" onclick="classTime(filter(true));">Filter</button>
					<button class="btn btn-success mr-1 rounded font-weight-bold" onclick=" classTime(filter(false));">View Next Day</button>
					<a target="_blank" href="https://keep.google.com/u/0/#NOTE/1bE6onAReGTCs95gKKjpvrqORCBz-Eqzw03y9eRd1J6Wjn-s93d-PpjV5eM5k"><button class="btn btn-danger mr-1 rounded " >Exam Routine</button></a>
					<button class="btn btn-warning mr-1 rounded font-weight-bold" id='eventMan' onclick="setAlarm();">Set Alarm</button></a>
				</div>

				<div class=" my-3 mx-5 ontainer text-center">
					<h5>Upcoming Class: </h5>
					
					<h5 id="upcoming"> </h5>
					<h5 id="countdown" class="bg-dark text-light" style="border: 2px solid red; margin-left: 22em; margin-right: 22em; padding: 7px;border-radius: 50px;"> </h5>
					<div id="input"></div>
					
				</div>
				<!-- END PAGE HEADER-->
				<div class="row-fluid"></div>
				<!-- BEGIN PAGE CONTENT-->
				<div class="row-fluid">
					<div class="span12">
						<div class="portlet box blue">

							<div class="portlet-body">
								<div class="clearfix">
								</div>
								<table class="table table-striped table-bordered table-hover" id="sample_1">
									<thead>
										<tr>
											<!--<th style="width:8px;">-->
											<!--<input type="checkbox" class="group-checkable" data-set="#sample_1 .checkboxes" />-->
											<!-- Serial</th>-->
											<th>Serial </th>
											<th class="">Course Code</th>
											<th>Section</th>
											<th>Shift</th>
											<th>Day</th>
											<th>Time</th>
											<th>Room</th>
											<th>Instructor</th>
										</tr>
									</thead>
									<tbody id="tbody">
										<tr class="odd gradeX">
											<td>
												<a target="_blank"href="https://www.messenger.com/t/3476677939078890">1</a>
											</td>
											<td class="">CSC 397</td>
											<td class="">F</td>
											<td class="">DAY</td>
											<td class="">Sunday</td>
											<td class="">01:15pm 02:15pm</td>
											<td class="">513
												<!--<a href="JavaScript:newPopup('soluation_details.php?SID=&TQ=');" style="color:#030">(view)</a>-->
											</td>
											<td class="">KD</td>
										</tr>
										<tr class="odd gradeX">
											<td>
												<a target="_blank"href="https://www.messenger.com/t/3476677939078890">2</a>
											</td>

											<td class="">CSC 397</td>
											<td class="">F</td>
											<td class="">DAY</td>
											<td class="">Monday</td>
											<td class="">01:15pm 02:15pm</td>
											<td class="">620
												<!--<a href="JavaScript:newPopup('soluation_details.php?SID=&TQ=');" style="color:#030">(view)</a>-->
											</td>
											<td class="">KD</td>
										</tr>

										<tr class="odd gradeX">

											<td>
												<a target="_blank"href="https://www.messenger.com/t/3476677939078890">3</a>
											</td>

											<td class="">CSC 397</td>
											<td class="">F</td>
											<td class="">DAY</td>
											<td class="">Tuesday</td>
											<td class="">01:15pm 02:15pm</td>
											<td class="">507
												<!--<a href="JavaScript:newPopup('soluation_details.php?SID=&TQ=');" style="color:#030">(view)</a>-->
											</td>
											<td class="">KD</td>
										</tr>

										<tr class="odd gradeX">

											<td>
												<a target="_blank"href="https://www.messenger.com/t/3476677939078890">4</a>
											</td>

											<td class="">CSC 397</td>
											<td class="">F</td>
											<td class="">DAY</td>
											<td class="">Wednesday</td>
											<td class="">01:15pm 02:15pm</td>
											<td class="">414
												<!--<a href="JavaScript:newPopup('soluation_details.php?SID=&TQ=');" style="color:#030">(view)</a>-->
											</td>
											<td class="">KD</td>
										</tr>

										<tr class="odd gradeX">

											<td>
												<a target="_blank"href="https://www.messenger.com/t/3476677939078890">5</a>
											</td>

											<td class="">CSC 397</td>
											<td class="">F</td>
											<td class="">DAY</td>
											<td class="">Thursday</td>
											<td class="">02:15pm 03:15pm</td>
											<td class="">803
												<!--<a href="JavaScript:newPopup('soluation_details.php?SID=&TQ=');" style="color:#030">(view)</a>-->
											</td>
											<td class="">KD</td>
										</tr>

										<tr class="odd gradeX">

											<td>
												<a target="_blank"href="https://www.messenger.com/t/3476677939078890">6</a>
											</td>

											<td class="">CSC 397</td>
											<td class="">F</td>
											<td class="">DAY</td>
											<td class="">Thursday</td>
											<td class="">03:15pm 04:15pm</td>
											<td class="">803
												<!--<a href="JavaScript:newPopup('soluation_details.php?SID=&TQ=');" style="color:#030">(view)</a>-->
											</td>
											<td class="">KD</td>
										</tr>

										<tr class="odd gradeX">

											<td>
												<a target="_blank"href="https://www.messenger.com/t/3995559630460126">7</a>
											</td>

											<td class="">CSC 437</td>
											<td class="">I</td>
											<td class="">DAY</td>
											<td class="">Sunday</td>
											<td class="">03:15pm 04:15pm</td>
											<td class="">305
												<!--<a href="JavaScript:newPopup('soluation_details.php?SID=&TQ=');" style="color:#030">(view)</a>-->
											</td>
											<td class="">SIS</td>
										</tr>

										<tr class="odd gradeX">

											<td>
												<a target="_blank"href="https://www.messenger.com/t/3995559630460126">8</a>
											</td>

											<td class="">CSC 437</td>
											<td class="">I</td>
											<td class="">DAY</td>
											<td class="">Monday</td>
											<td class="">03:15pm 04:15pm</td>
											<td class="">608
												<!--<a href="JavaScript:newPopup('soluation_details.php?SID=&TQ=');" style="color:#030">(view)</a>-->
											</td>
											<td class="">SIS</td>
										</tr>

										<tr class="odd gradeX">

											<td>
												<a target="_blank"href="https://www.messenger.com/t/3995559630460126">9</a>
											</td>

											<td class="">CSC 437</td>
											<td class="">I</td>
											<td class="">DAY</td>
											<td class="">Tuesday</td>
											<td class="">12:00pm 01:00pm</td>
											<td class="">408
												<!--<a href="JavaScript:newPopup('soluation_details.php?SID=&TQ=');" style="color:#030">(view)</a>-->
											</td>
											<td class="">SIS</td>
										</tr>

										<tr class="odd gradeX">

											<td>
												<a target="_blank"href="https://www.messenger.com/t/3995559630460126">10</a>
											</td>

											<td class="">CSC 437</td>
											<td class="">I</td>
											<td class="">DAY</td>
											<td class="">Wednesday</td>
											<td class="">03:15pm 04:15pm</td>
											<td class="">602
												<!--<a href="JavaScript:newPopup('soluation_details.php?SID=&TQ=');" style="color:#030">(view)</a>-->
											</td>
											<td class="">SIS</td>
										</tr>

										<tr class="odd gradeX">

											<td>
												<a target="_blank"href="https://www.messenger.com/t/3995559630460126">11</a>
											</td>

											<td class="">CSC 437</td>
											<td class="">I</td>
											<td class="">DAY</td>
											<td class="">Thursday</td>
											<td class="">06:15pm 07:15pm</td>
											<td class="">604
												<!--<a href="JavaScript:newPopup('soluation_details.php?SID=&TQ=');" style="color:#030">(view)</a>-->
											</td>
											<td class="">SIS</td>
										</tr>

										<tr class="odd gradeX">

											<td>
												<a target="_blank"href="https://meet.google.com/sbi-xrcp-jid">12</a>
											</td>

											<td class="">CSC 465</td>
											<td class="">A</td>
											<td class="">DAY</td>
											<td class="">Saturday</td>
											<td class="">05:15pm 06:15pm</td>
											<td class="">607
												<!--<a href="JavaScript:newPopup('soluation_details.php?SID=&TQ=');" style="color:#030">(view)</a>-->
											</td>
											<td class="">DAS</td>
										</tr>

										<tr class="odd gradeX">

											<td>
												<a target="_blank"href="https://meet.google.com/sbi-xrcp-jid">13</a>
											</td>

											<td class="">CSC 465</td>
											<td class="">A</td>
											<td class="">DAY</td>
											<td class="">Sunday</td>
											<td class="">06:15pm 07:15pm</td>
											<td class="">403
												<!--<a href="JavaScript:newPopup('soluation_details.php?SID=&TQ=');" style="color:#030">(view)</a>-->
											</td>
											<td class="">DAS</td>
										</tr>

										<tr class="odd gradeX">

											<td>
												<a target="_blank"href="https://meet.google.com/sbi-xrcp-jid">14</a>
											</td>

											<td class="">CSC 465</td>
											<td class="">A</td>
											<td class="">DAY</td>
											<td class="">Monday</td>
											<td class="">11:00am 12:00pm</td>
											<td class="">608
												<!--<a href="JavaScript:newPopup('soluation_details.php?SID=&TQ=');" style="color:#030">(view)</a>-->
											</td>
											<td class="">DAS</td>
										</tr>

										<tr class="odd gradeX">

											<td>
												<a target="_blank"href="https://meet.google.com/sbi-xrcp-jid">15</a>
											</td>

											<td class="">CSC 465</td>
											<td class="">A</td>
											<td class="">DAY</td>
											<td class="">Wednesday</td>
											<td class="">11:00am 12:00pm</td>
											<td class="">407
												<!--<a href="JavaScript:newPopup('soluation_details.php?SID=&TQ=');" style="color:#030">(view)</a>-->
											</td>
											<td class="">DAS</td>
										</tr>

										<tr class="odd gradeX">

											<td>
												<a target="_blank"href="https://meet.google.com/sbi-xrcp-jid">16</a>
											</td>

											<td class="">CSC 465</td>
											<td class="">A</td>
											<td class="">DAY</td>
											<td class="">Thursday</td>
											<td class="">11:00am 12:00pm</td>
											<td class="">602
												<!--<a href="JavaScript:newPopup('soluation_details.php?SID=&TQ=');" style="color:#030">(view)</a>-->
											</td>
											<td class="">DAS</td>
										</tr>

										<tr class="odd gradeX">

											<td>
												<a target="_blank"href="https://meet.google.com/fmk-vfto-mhz">17</a>
											</td>

											<td class="">CSC 466</td>
											<td class="">A</td>
											<td class="">DAY</td>
											<td class="">Tuesday</td>
											<td class="">10:00am 11:00am</td>
											<td class="">Comlab4
												<!--<a href="JavaScript:newPopup('soluation_details.php?SID=&TQ=');" style="color:#030">(view)</a>-->
											</td>
											<td class="">DAS</td>
										</tr>

										<tr class="odd gradeX">

											<td>
												<a target="_blank"href="https://www.messenger.com/t/4985098824835373">18</a>
											</td>

											<td class="">CSC 387</td>
											<td class="">B</td>
											<td class="">DAY</td>
											<td class="">Saturday</td>
											<td class="">11:00am 12:00pm</td>
											<td class="">807
												<!--<a href="JavaScript:newPopup('soluation_details.php?SID=&TQ=');" style="color:#030">(view)</a>-->
											</td>
											<td class="">SR</td>
										</tr>

										<tr class="odd gradeX">

											<td>
												<a target="_blank"href="https://www.messenger.com/t/4985098824835373">19</a>
											</td>

											<td class="">CSC 387</td>
											<td class="">B</td>
											<td class="">DAY</td>
											<td class="">Saturday</td>
											<td class="">12:00pm 01:00pm</td>
											<td class="">807
												<!--<a href="JavaScript:newPopup('soluation_details.php?SID=&TQ=');" style="color:#030">(view)</a>-->
											</td>
											<td class="">SR</td>
										</tr>

										<tr class="odd gradeX">

											<td>
												<a target="_blank"href="https://www.messenger.com/t/4985098824835373">20</a>
											</td>

											<td class="">CSC 387</td>
											<td class="">B</td>
											<td class="">DAY</td>
											<td class="">Sunday</td>
											<td class="">10:00am 11:00am</td>
											<td class="">611
												<!--<a href="JavaScript:newPopup('soluation_details.php?SID=&TQ=');" style="color:#030">(view)</a>-->
											</td>
											<td class="">SR</td>
										</tr>

										<tr class="odd gradeX">

											<td>
												<a target="_blank"href="https://www.messenger.com/t/4985098824835373">21</a>
											</td>

											<td class="">CSC 387</td>
											<td class="">B</td>
											<td class="">DAY</td>
											<td class="">Monday</td>
											<td class="">10:00am 11:00am</td>
											<td class="">804
												<!--<a href="JavaScript:newPopup('soluation_details.php?SID=&TQ=');" style="color:#030">(view)</a>-->
											</td>
											<td class="">SR</td>
										</tr>

										<tr class="odd gradeX">

											<td>
												<a target="_blank"href="https://www.messenger.com/t/4985098824835373">22</a>
											</td>

											<td class="">CSC 387</td>
											<td class="">B</td>
											<td class="">DAY</td>
											<td class="">Thursday</td>
											<td class="">10:00am 11:00am</td>
											<td class="">603
												<!--<a href="JavaScript:newPopup('soluation_details.php?SID=&TQ=');" style="color:#030">(view)</a>-->
											</td>
											<td class="">SR</td>
										</tr>


									</tbody>
								</table>
							</div>


						</div>

						<!-- END LABELS AND BADGES PORTLET-->
						<!-- BEGIN PAGINATION PORTLET-->
						<!-- END PAGINATION PORTLET-->
					</div>
				</div>
				<!--problem type chart generate-->

				<!--problem type chart generate end-->
				<div class="row-fluid">
				</div>
				<div class="row-fluid"></div>
				<!-- END PAGE CONTENT-->
			</div>
			<!-- END PAGE CONTAINER-->
		</div>
		<!-- END PAGE -->
	</div>
	<!-- END CONTAINER -->

	<div class="footer text-center container mt-5 pt-3">
		2020 © Noushad Bhuiyan.
		<div class="span pull-right">
			<span class="go-top"><i class="icon-angle-up"></i></span>
		</div>
	</div>

	<!--Spacial JS files for This Page-->
	<script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
	<script>

		let button = document.getElementById('eventMan'); // 
			$(document).ready(function(){

			$("#myInput").on("keyup", function() {
				var value = $(this).val().toLowerCase();
				$("#tbody tr").filter(function() {
				$(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
				});
			});
		});

		let days = ['Sunday','Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];
		// initiate layout and plugins
		let d = new Date();
		let today = days[d.getDay()];
		let tomorrow = days[d.getDay()+1];
		let timeNow = formatAMPM(d);
		let unclicked = true;
		let danger = true;
		let alarm = false;
		let tomorrowClicked = false;
		let viewClicked = false;
		let filterClicked = false;

		let textTitle = document.getElementById("page-title");
		textTitle.innerHTML = "Today is " + today + ", Time is: " + timeNow;


		let tableData = document.querySelectorAll(".gradeX");
		let tableHead = document.querySelectorAll("#sample_1")[0];
		let upcomingContext = document.querySelector("#upcoming");
		let counterContext = document.querySelector("#countdown");

		filter(true);
		// var x = document.getElementById("foobar");
		// x.play();
		window.setInterval(function(){
		  	let update = new Date();
		  	textTitle.innerHTML = "Today is " + today + ", Time is: " + formatAMPM(update);
			 // $("#body").load(location.toString());
		  	if(unclicked) location.reload();
		  	if(tomorrowClicked) classTime(filter(false));
		  	if(viewClicked) viewAll(true);

		  }, 5000);

		classTime(filter(true));

		function setAlarm(){
			alarm = true;
		}

		function filter(compDay) {
			viewClicked = false;
			filterClicked = true;
			viewAll(false);
			let ids = [], comparedDay;
			compDay == true ? comparedDay = today : comparedDay = tomorrow;
			compDay == true ? unclicked = true : unclicked = false;
			compDay == false ? tomorrowClicked = true: tomorrowClicked = false;

			if (comparedDay == 'Friday') {
					tableHead.style.opacity = "0";
			}
			else{
					for (i = 0; i < tableData.length; i++) {
					if (tableData[i]["cells"][4].innerText == comparedDay) {
						tableHead.classList.add("show");
						tableData[i].classList.add("show");
						ids.push(parseInt(tableData[i]["cells"][0].innerText) - 1);

					}
					else {
						tableData[i].classList.add("hide");
					}
				}
			}
			return ids;
		}

		function viewAll(decision) {
			tableHead.style.opacity = "1";
			document.getElementById('input').style.display = 'block';
			upcomingContext.style.display = 'block';
			if(decision){
				viewClicked = true;
				unclicked = false;
				filterClicked = false;
				upcomingContext.style.display = 'none';
			}
			else{
				viewClicked = false;
				filterClicked = true;
				document.getElementById('input').style.display = 'none';
			}
			if(document.getElementById('input').innerHTML == ""){
					var x = document.createElement("INPUT");
					x.setAttribute("type", "text");
					x.classList.add("form-control");
					x.setAttribute("id", "myInput");
					x.setAttribute("placeholder", 'Search..');
					document.getElementById('input').appendChild(x);
			}

			for (i = 0; i < tableData.length; i++) {
				tableData[i].classList.remove("hide");
			}
		}


		function classTime(arr = []) {
			viewClicked = false;
			diffArr = [], classesDoneArr = [], courseArr = [], idArr = [], classHrMinFrmt = [];

			for (let j = 0; j < arr.length; j++) {
				let differ;
				classHrMinFrmt.push(formatTwentyFour(tableData[arr[j]]["cells"][5].innerText.substring(0, 7)));
				courseArr.push((tableData[arr[j]]["cells"][1].innerText));
				idArr.push((tableData[arr[j]]["cells"][0].innerText));


				if (parseInt(classHrMinFrmt[j].substring(0,2)) - parseInt(formatTwentyFour(timeNow).substring(0,2)) > 0){
					 differ = parseInt(classHrMinFrmt[j].substring(0,2)) - parseInt(formatTwentyFour(timeNow).substring(0,2));
				}
				else if(parseInt(classHrMinFrmt[j].substring(0,2)) - parseInt(formatTwentyFour(timeNow).substring(0,2)) < 0){
					 differ = parseInt(classHrMinFrmt[j].substring(0,2)) - parseInt(formatTwentyFour(timeNow).substring(0,2)) - 12;
				}
				else{
					differ = parseInt(classHrMinFrmt[j].substring(classHrMinFrmt[j].length-4,classHrMinFrmt[j].length-2)) - parseInt(formatTwentyFour(timeNow).substring(timeNow.length-4,timeNow.length-2)) >0 ? 0: -22;
				}

				console.log('differ' + differ);


				diffArr.push(differ);
				console.log('diffArr' + '[' + j + ']' + ': ' + diffArr[j]);
			}

			diffArr.sort(function (a, b) { return b - a });
			console.log('\ndiffArr = ' + diffArr);

			for(let i = 0; i<diffArr.length; i++) {

				if(diffArr[i] == 0) {
					classesDoneArr.push(diffArr[i]);
				}

				if(diffArr[i] < 0) {
					classesDoneArr.push(diffArr[i]);
					diffArr.splice(i, 1);
					i--;
				}
			}

			console.log('\ndiffArr after loop: ' + diffArr);

			index = classHrMinFrmt.findIndex((v) => {
				 return v.substring(0, 2) == parseInt(formatTwentyFour(timeNow)) + diffArr[diffArr.length - 1];
			});
			console.log('\nindex: ' + index); //we got the index of the upcoming class's table row
			let counter = 0;
				for(let i = 0; i<idArr.length; i++) {

					if(!tomorrowClicked){

						let countedDiff = getDifference(classHrMinFrmt[i], formatTwentyFour(timeNow));
					// alert(countedDiff);
						let data = tableData[idArr[i]-1]["cells"][0].innerHTML;

						if(countedDiff < -15 ){
							tableData[idArr[i]-1]["cells"][0].innerHTML = '';
							tableData[idArr[i]-1]["cells"][0].innerHTML = data + '  ✔️';
							if(countedDiff < -0 ){
							tableData[idArr[i]-1].style.backgroundColor = "transparent";
							}
						}

						if(countedDiff <= 0  && countedDiff >= -15 ){
							tableData[idArr[i]-1]["cells"][0].innerHTML = '';
							tableData[idArr[i]-1]["cells"][0].innerHTML = data + '  ⌛';
							tableData[idArr[i]-1].style.backgroundColor = "transparent";
							tableData[idArr[i]-1].style.backgroundColor = "coral";
							tableData[idArr[i]-1].style.fontWeight = "bold";

							// button.addEventListener('click', function(){
							// 	if(alarm){
							// 		audio = document.getElementById("audio");
							// 		audio.play();
							// 		audio.stop();
							// 	}
							// });
							// alarm = false;
						}

						if(countedDiff > 0  && counter == 0 ){
							counter++;
							tableData[idArr[i]-1]["cells"][0].innerHTML = '';
							tableData[idArr[i]-1]["cells"][0].innerHTML = data + '  🕐';
							tableData[idArr[i]-1].style.backgroundColor = "transparent";
							tableData[idArr[index]-1].style.backgroundColor = "gold";
							tableData[idArr[i]-1].style.fontWeight = "bold";
						}

					}
				}

			let upcomingClassTime;
			upcomingClassTime = classHrMinFrmt[index];

			if(!tomorrowClicked){
				if(diffArr.length == 0 && index == -1){
					upcomingContext.innerText = '😁 No more class remaining today 😁';
				}
				else{
					let upcomingClass = courseArr[index];
					upcomingContext.innerText = '⏰ '+upcomingClass + ', at ' + formatAMPM(upcomingClassTime)+' ⏰';
				}
				if(today == 'Friday'){
					upcomingContext.innerText = '✨ Today is Jumma Mubarak. Recite Surah Kahf today ✨';
				}
			}

			else
			{
				if(tomorrow == 'Friday'){
					upcomingContext.innerText = '✨ Tomorrow is Jumma Mubarak ✨';
				}
			}
			upcomingContext.classList.add("text-primary");
			let counterText = countdownTimer(upcomingClassTime);
			let blinker = ':';
			counterContext.innerHTML = counterText.substring(0,2)+'&nbsp;'+blinker+'&nbsp;'+counterText.substring(3,7)+' hour(s) remaining';
			window.setInterval(function(){
			blinker = blinker == ' ' ? ':': ' ';
			counterContext.innerHTML = counterText.substring(0,2)+'&nbsp;'+blinker+'&nbsp;'+counterText.substring(3,7)+' hour(s) remaining';
		  }, 1000);
		}

		function countdownTimer(upcomingClassTime){
			let num = getDifference(upcomingClassTime,formatTwentyFour(timeNow));
			console.log('\ngetDifference: ' + num);
			let hours = Math.floor(num / 60);
			console.log('\nhrs: ' + hours);
//			hours = hours/100;
			let minutes = num % 60;
			hours = hours < 10 ? '0' + hours : hours;
			minutes = minutes < 10 ? '0' + minutes : minutes;
			return `${hours}:${minutes}`;
		}

		function formatAMPM(date) {
			let hours,minutes,ampm;

			if(typeof(date) == 'string') {
				hours = date.length==7? parseInt(date.substring(0, 2)): parseInt(date.substring(0, 1));
				minutes = date.length==7? parseInt(date.substring(3, 5)): parseInt(date.substring(2, 4));
				ampm = date.length==7? date.substring(5, 7) : date.substring(4, 6);
			}

			else if(typeof(date) == 'object') {
				 hours = date.getHours();
				 minutes = date.getMinutes();
				 ampm = hours >= 12 ? 'pm' : 'am';

			}

			hours = hours % 12;
			hours = hours < 10 ? '0' + hours : hours;
			minutes = minutes < 10 ? '0' + minutes : minutes;
			let strTime = hours + ':' + minutes + ampm;
			return strTime;
		}

		function formatTwentyFour(d) {
			let hours = d.length==7? parseInt(d.substring(0, 2)): parseInt(d.substring(0, 1));
			let minutes = d.length==7? d.substring(3, 5): d.substring(2, 4);
			let ampm = d.length==7? d.substring(5, 7) : d.substring(4, 6);
			ampm == 'pm' ? hours += 12 : hours += 0;
			hours == 24 ? hours -= 12 : hours += 0;
			if(hours < 10){
				hours = hours.toString();
				hours = '0'+ hours;
			}
			let strTime = hours + ':' + minutes + ampm;
			return strTime;
		}

		function getDifference(a,b) {
			let aHours = a.length==7? parseInt(a.substring(0, 2)): parseInt(a.substring(0, 1));
			let aMinutes = a.length==7? parseInt(a.substring(3, 5)): parseInt(a.substring(2, 4));
			let aAmpm = a.length==7? a.substring(5, 7) : a.substring(4, 6);
			let aTime = aHours*60+aMinutes;

			let bHours = b.length==7? parseInt(b.substring(0, 2)): parseInt(b.substring(0, 1));
			let bMinutes = b.length==7? parseInt(b.substring(3, 5)): parseInt(b.substring(2, 4));
			let bAmpm = b.length==7? b.substring(5, 7) : b.substring(4, 6);
			let bTime = bHours*60+bMinutes;

			let diff = aTime - bTime;

			// let strTime = hours + ':' + minutes + ampm;
			return diff;
		}

</script>
</body>

</html>